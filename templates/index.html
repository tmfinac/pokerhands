<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>5カードポーカー役判定</title>
<style>
body {
    font-family: 'Helvetica', 'Arial', sans-serif;
    background-color: #f5f5f5;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
}
h2 { color: #333; margin-bottom: 10px; }
.cards-container { display: flex; flex-wrap: wrap; justify-content: center; margin-bottom: 20px; }
img.card {
    width: 110px;
    margin: 8px;
    cursor: pointer;
    border-radius: 8px;
    transition: transform 0.2s, box-shadow 0.2s;
}
img.card:hover { transform: scale(1.1); box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
.result {
    font-size: 3em;
    font-weight: bold;
    color: #ff5722;
    margin: 20px 0;
    text-shadow: 2px 2px 5px rgba(0,0,0,0.3);
    text-align: center;
}
button {
    background-color: #2196f3;
    color: white;
    border: none;
    padding: 18px 36px;
    font-size: 1.3em;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.2s, transform 0.2s;
}
button:hover { background-color: #1976d2; transform: scale(1.05); }
@media (max-width: 600px) {
    img.card { width: 90px; margin: 6px; }
    .result { font-size: 2.5em; }
    button { padding: 14px 28px; font-size: 1.1em; }
}
@media (max-width: 400px) {
    img.card { width: 70px; margin: 4px; }
    .result { font-size: 2em; }
    button { padding: 12px 24px; font-size: 1em; }
}
</style>
</head>
<body>

<h2>選択したカード</h2>
<div id="selected" class="cards-container">
    {% for card in selected %}
        <img class="card" src="{{ url_for('static', filename='cards/' + card + '.png') }}">
    {% endfor %}
</div>

<p id="result" class="result">{% if result %}役判定: {{ result }}{% endif %}</p>

<h2>カードを選択</h2>
<div class="cards-container">
    {% for card in cards %}
        <img class="card" src="{{ url_for('static', filename='cards/' + card + '.png') }}" onclick="addCard('{{ card }}')">
    {% endfor %}
</div>

<form action="{{ url_for('reset') }}" method="get" style="margin-top: 20px;">
    <button type="submit">リセット</button>
</form>

<script>
function addCard(card) {
    fetch(`/add_ajax/${card}`)
    .then(response => response.json())
    .then(data => {
        // 選択したカードを更新
        const selectedDiv = document.getElementById("selected");
        selectedDiv.innerHTML = "";
        data.selected.forEach(c => {
            const img = document.createElement("img");
            img.src = `/static/cards/${c}.png`;
            img.className = "card";
            selectedDiv.appendChild(img);
        });
        // 役判定を更新
        const resultP = document.getElementById("result");
        if (data.result) {
            resultP.textContent = "役判定: " + data.result;
        } else {
            resultP.textContent = "";
        }
    });
}
</script>

</body>
</html>