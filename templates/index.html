<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>5カードポーカー役判定</title>
<style>
body {
    font-family: 'Helvetica', 'Arial', sans-serif;
    background:#f5f5f5;
    display:flex;
    flex-direction:column;
    align-items:center;
    padding:20px;
}

h2 { color:#333; margin-bottom:10px; }

.cards-container {
    display:flex;
    flex-wrap:wrap;
    justify-content:center;
    margin-bottom:20px;
}

.card {
    width:80px;
    height:120px;
    margin:8px;
    cursor:pointer;
    border-radius:8px;
    background:white;
    box-shadow:0 2px 6px rgba(0,0,0,0.2);
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:1.5em;
    transition: transform 0.5s, box-shadow 0.5s;
    perspective: 600px; /* 3D効果 */
}

.card.red { color: red; }
.card.black { color: black; }

.card:hover {
    transform: rotateY(180deg) scale(1.1);
    box-shadow:0 5px 15px rgba(0,0,0,0.3);
}

.result {
    font-size:2.5em;
    font-weight:bold;
    margin:20px 0;
    text-shadow:2px 2px 5px rgba(0,0,0,0.3);
    text-align:center;
    color:#ff5722;
}

button {
    background:#2196f3;
    color:white;
    border:none;
    padding:18px 36px;
    font-size:1.3em;
    border-radius:8px;
    cursor:pointer;
    transition: background 0.2s, transform 0.2s;
}

button:hover { background:#1976d2; transform:scale(1.05); }

@media (max-width:600px){
    .card{ width:70px; height:100px; font-size:1.2em;}
    .result{ font-size:2em;}
    button{ padding:14px 28px; font-size:1.1em;}
}
@media (max-width:400px){
    .card{ width:60px; height:90px; font-size:1em;}
    .result{ font-size:1.5em;}
    button{ padding:12px 24px; font-size:1em;}
}
</style>
</head>
<body>

<h2>選択したカード</h2>
<div id="selected" class="cards-container">
    {% for card in selected %}
        <div class="card {{ 'red' if card[-1] in ['♥','♦'] else 'black' }}">{{ card }}</div>
    {% endfor %}
</div>

<p id="result" class="result">{% if result %}役判定: {{ result }}{% endif %}</p>

<h2>カードを選択</h2>
<div class="cards-container">
    {% for card in cards %}
        <div class="card {{ 'red' if card[-1] in ['♥','♦'] else 'black' }}" onclick="addCard('{{ card }}')">{{ card }}</div>
    {% endfor %}
</div>

<form action="{{ url_for('reset') }}" method="get" style="margin-top:20px;">
    <button type="submit">リセット</button>
</form>

<script>
function addCard(card){
    fetch(`/add_ajax/${card}`)
    .then(res=>res.json())
    .then(data=>{
        const selectedDiv = document.getElementById("selected");
        selectedDiv.innerHTML="";
        data.selected.forEach(c=>{
            const div=document.createElement("div");
            div.className="card "+(c.slice(-1)==='♥'||c.slice(-1)==='♦' ? 'red':'black');
            div.textContent=c;
            selectedDiv.appendChild(div);
        });
        const resultP=document.getElementById("result");
        resultP.textContent = data.result ? "役判定: "+data.result : "";
    });
}
</script>

</body>
</html>