<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ポーカー役判定</title>
<style>
body { font-family: Arial, sans-serif; padding:20px; }
.marks button { margin:5px; padding:10px 15px; font-size:16px; }
#cards img { width:80px; margin:5px; cursor:pointer; }
#selected-cards { margin-top:15px; font-weight:bold; font-size:18px; }
#result { margin-top:10px; font-size:20px; color:blue; }
</style>
</head>
<body>

<h2>マークを選択してください</h2>
<div class="marks">
{% for mark in marks %}
<a href="{{ url_for('select_mark', mark=mark) }}"><button>{{ mark }}</button></a>
{% endfor %}
</div>

{% if current_mark %}
<h3>{{ current_mark }} のカードを選択してください</h3>
<div id="cards">
{% for card in cards %}
<img src="{{ url_for('static', filename='cards/' ~ card ~ '.png') }}"
     alt="{{ card }}"
     onclick="selectCard('{{ card }}')">
{% endfor %}
</div>
{% endif %}

<div>
<h3>選択カード:</h3>
<div id="selected-cards">{{ selected | join(', ') }}</div>
<h3>役:</h3>
<div id="result">{{ result }}</div>
</div>

<div style="margin-top:20px;">
<a href="{{ url_for('reset') }}"><button>リセット</button></a>
</div>

<script>
function selectCard(card) {
    fetch("/add_ajax/" + card)
    .then(res => res.json())
    .then(data => {
        document.getElementById("selected-cards").textContent = data.selected.join(", ");
        document.getElementById("result").textContent = data.result;

        // 5枚選んだらクリック無効化
        if(data.selected.length>=5){
            document.querySelectorAll("#cards img").forEach(img=>img.style.pointerEvents="none");
        }
    });
}
</script>

</body>
</html>